<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Week 11: Deployment & DevOps | Python Course</title>
    <meta name="description" content="Interactive lesson on deploying Python applications: Environment Variables, Docker, and Production Servers.">
    <link rel="icon" type="image/png" href="../assets/brands/favicon-straydog.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;800&family=Orbitron:wght@700;900&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
           CSS CUSTOM PROPERTIES (Variables) - CONSISTENT THEME
           ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
        :root {
            --bg-dark: #0a0e27;
            --bg-medium: #1a1f3a;
            --bg-light: #2a2f4a;
            --accent-cyan: #00f0ff;
            --accent-magenta: #ff00ff;
            --accent-yellow: #ffff00;
            --accent-green: #00ff41;
            --accent-orange: #ff6b35;
            --accent-red: #ff3366;
            --accent-blue: #4da6ff;
            --text-primary: #e0e0e0;
            --text-secondary: #a0a0a0;
            --level-bad: #ff3366;
            --level-novice: #ff9f43;
            --level-intermediate: #4da6ff;
            --level-best: #00ff41;
            --shadow-glow: 0 0 20px rgba(0, 240, 255, 0.3);
            --shadow-glow-green: 0 0 20px rgba(0, 255, 65, 0.3);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Space Mono', monospace;
            background: var(--bg-dark);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0, 240, 255, 0.03) 2px, rgba(0, 240, 255, 0.03) 4px);
            pointer-events: none;
            z-index: 1;
            animation: scanlines 8s linear infinite;
        }

        @keyframes scanlines {
            0% { transform: translateY(0); }
            100% { transform: translateY(4px); }
        }

        header {
            position: relative;
            z-index: 10;
            padding: 2rem;
            text-align: center;
            background: linear-gradient(135deg, var(--bg-medium) 0%, var(--bg-dark) 100%);
            border-bottom: 3px solid var(--accent-cyan);
            box-shadow: 0 4px 20px rgba(0, 240, 255, 0.2);
        }

        h1 {
            font-family: 'Orbitron', monospace;
            font-size: 2.5rem;
            font-weight: 900;
            background: linear-gradient(45deg, var(--accent-cyan), var(--accent-magenta));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { filter: drop-shadow(0 0 5px var(--accent-cyan)); }
            to { filter: drop-shadow(0 0 20px var(--accent-magenta)); }
        }

        .subtitle { font-size: 1.1rem; color: var(--accent-green); font-weight: 600; }
        
        .week-badge {
            display: inline-block;
            background: var(--accent-magenta);
            color: var(--bg-dark);
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            margin-top: 0.5rem;
        }

        .progress-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 4px; background: var(--bg-medium); z-index: 1000;
        }
        .progress-bar {
            height: 100%; background: linear-gradient(90deg, var(--accent-cyan), var(--accent-magenta)); width: 0%; transition: width 0.3s ease; box-shadow: var(--shadow-glow);
        }
        .xp-bar {
            position: fixed; top: 20px; right: 20px; background: var(--bg-medium); padding: 1rem; border-radius: 8px; border: 2px solid var(--accent-cyan); z-index: 100; min-width: 220px; box-shadow: var(--shadow-glow);
        }
        .xp-label { font-size: 0.85rem; color: var(--accent-yellow); margin-bottom: 0.5rem; font-weight: 700; }
        .xp-progress { width: 100%; height: 20px; background: var(--bg-dark); border-radius: 10px; overflow: hidden; position: relative; }
        .xp-fill { height: 100%; background: linear-gradient(90deg, var(--accent-green), var(--accent-cyan)); width: 0%; transition: width 0.5s ease; }
        .xp-text { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 0.75rem; font-weight: 700; color: var(--text-primary); text-shadow: 1px 1px 2px rgba(0,0,0,0.8); }

        .container { display: flex; max-width: 1400px; margin: 0 auto; position: relative; z-index: 2; }
        .sidebar { width: 300px; position: sticky; top: 20px; height: calc(100vh - 40px); padding: 2rem 1rem; background: var(--bg-medium); border-right: 2px solid var(--accent-cyan); overflow-y: auto; }
        .nav-title { font-size: 0.9rem; color: var(--accent-yellow); margin-bottom: 1rem; font-weight: 700; text-transform: uppercase; }
        .nav-item { padding: 0.75rem 1rem; margin-bottom: 0.5rem; cursor: pointer; border-left: 3px solid transparent; transition: all 0.3s ease; font-size: 0.95rem; background: var(--bg-dark); border-radius: 4px; }
        .nav-item:hover { border-left-color: var(--accent-cyan); background: var(--bg-light); transform: translateX(5px); }
        .nav-item.active { border-left-color: var(--accent-magenta); background: var(--bg-light); color: var(--accent-cyan); box-shadow: var(--shadow-glow); }
        .nav-item.completed::after { content: ' ‚úì'; color: var(--accent-green); float: right; }
        
        .main-content { flex: 1; padding: 2rem; min-height: 100vh; }
        .section { display: none; animation: fadeIn 0.5s ease; }
        .section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        h2 { font-family: 'Orbitron', monospace; font-size: 2rem; color: var(--accent-cyan); margin-bottom: 1rem; text-transform: uppercase; letter-spacing: 1px; }
        h3 { font-family: 'Orbitron', monospace; font-size: 1.5rem; color: var(--accent-magenta); margin: 2rem 0 1rem 0; }
        p { margin-bottom: 1rem; color: var(--text-secondary); line-height: 1.8; }

        .skill-progression { margin: 2rem 0; background: var(--bg-medium); border-radius: 12px; overflow: hidden; border: 2px solid var(--bg-light); }
        .skill-tabs { display: flex; background: var(--bg-dark); border-bottom: 2px solid var(--bg-light); flex-wrap: wrap; }
        .skill-tab { flex: 1; min-width: 120px; padding: 1rem; cursor: pointer; text-align: center; font-weight: 700; font-size: 0.85rem; transition: all 0.3s ease; border: none; background: transparent; color: var(--text-secondary); font-family: 'Space Mono', monospace; position: relative; }
        .skill-tab::after { content: ''; position: absolute; bottom: 0; left: 0; width: 100%; height: 3px; background: transparent; transition: background 0.3s ease; }
        .skill-tab:hover { background: var(--bg-light); }
        .skill-tab.active { color: var(--text-primary); }
        .skill-tab[data-level="bad"] { border-top: 3px solid var(--level-bad); }
        .skill-tab[data-level="novice"] { border-top: 3px solid var(--level-novice); }
        .skill-tab[data-level="intermediate"] { border-top: 3px solid var(--level-intermediate); }
        .skill-tab[data-level="best"] { border-top: 3px solid var(--level-best); }
        .skill-tab[data-level="bad"].active::after { background: var(--level-bad); }
        .skill-tab[data-level="novice"].active::after { background: var(--level-novice); }
        .skill-tab[data-level="intermediate"].active::after { background: var(--level-intermediate); }
        .skill-tab[data-level="best"].active::after { background: var(--level-best); }
        .skill-tab-icon { display: block; font-size: 1.2rem; margin-bottom: 0.25rem; }
        .skill-content { display: none; padding: 0; animation: fadeIn 0.3s ease; }
        .skill-content.active { display: block; }

        .code-container { background: var(--bg-dark); border: 2px solid var(--accent-cyan); border-radius: 8px; margin: 1.5rem 0; overflow: hidden; box-shadow: var(--shadow-glow); }
        .code-container.level-bad { border-color: var(--level-bad); box-shadow: 0 0 15px rgba(255, 51, 102, 0.2); }
        .code-container.level-novice { border-color: var(--level-novice); box-shadow: 0 0 15px rgba(255, 159, 67, 0.2); }
        .code-container.level-intermediate { border-color: var(--level-intermediate); box-shadow: 0 0 15px rgba(77, 166, 255, 0.2); }
        .code-container.level-best { border-color: var(--level-best); box-shadow: var(--shadow-glow-green); }

        .code-header { background: var(--bg-medium); padding: 0.75rem 1rem; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--accent-cyan); flex-wrap: wrap; gap: 0.5rem; }
        .code-header-left { display: flex; align-items: center; gap: 0.75rem; flex-wrap: wrap; }
        .code-label { color: var(--accent-yellow); font-weight: 700; font-size: 0.9rem; }
        .level-badge { padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; }
        .level-badge.bad { background: var(--level-bad); color: white; }
        .level-badge.novice { background: var(--level-novice); color: var(--bg-dark); }
        .level-badge.intermediate { background: var(--level-intermediate); color: var(--bg-dark); }
        .level-badge.best { background: var(--level-best); color: var(--bg-dark); }
        .semantic-label { font-size: 0.8rem; color: var(--text-secondary); padding: 0.25rem 0.5rem; background: var(--bg-dark); border-radius: 4px; }

        pre { padding: 1.5rem; overflow-x: auto; font-family: 'JetBrains Mono', monospace; font-size: 0.9rem; line-height: 1.7; background: var(--bg-dark); color: var(--text-primary); margin: 0; }
        .keyword { color: var(--accent-magenta); font-weight: 600; }
        .string { color: var(--accent-green); }
        .function { color: var(--accent-cyan); }
        .comment { color: #6a9955; font-style: italic; }
        .number { color: var(--accent-yellow); }
        .class-name { color: var(--accent-orange); font-weight: bold; }
        .builtin { color: var(--accent-blue); }
        .decorator { color: var(--accent-yellow); }

        .output { background: #000; color: var(--text-primary); padding: 0; font-family: 'JetBrains Mono', monospace; font-size: 0.85rem; border-top: 1px solid var(--bg-light); max-height: 0; overflow: hidden; transition: all 0.3s ease; }
        .output.show { padding: 1rem; max-height: 300px; overflow-y: auto; }
        .output-label { color: var(--text-secondary); font-size: 0.75rem; text-transform: uppercase; margin-bottom: 0.5rem; display: block; }

        .run-button { background: var(--accent-green); color: var(--bg-dark); border: none; padding: 0.4rem 1rem; border-radius: 4px; font-family: 'Space Mono', monospace; font-weight: 700; cursor: pointer; transition: all 0.2s; font-size: 0.8rem; }
        .run-button:hover { transform: translateY(-2px); box-shadow: 0 0 10px var(--accent-green); }
        .run-button:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }

        .explanation-box { background: var(--bg-medium); border-radius: 8px; padding: 1.25rem; margin: 1rem 0; border-left: 4px solid var(--accent-blue); }
        .explanation-box.tip { border-left-color: var(--level-best); }
        .explanation-box.warning { border-left-color: var(--level-bad); }
        .explanation-box.info { border-left-color: var(--accent-cyan); }
        .explanation-title { font-weight: 700; margin-bottom: 0.5rem; color: var(--text-primary); display: flex; align-items: center; gap: 0.5rem; }

        .objectives-box { background: linear-gradient(135deg, rgba(0, 240, 255, 0.1), var(--bg-medium)); border: 2px solid var(--accent-cyan); border-radius: 8px; padding: 1.5rem; margin: 1.5rem 0; }
        .objectives-list li { padding: 0.5rem 0; padding-left: 1.5rem; position: relative; }
        .objectives-list li::before { content: '‚ñ∏'; position: absolute; left: 0; color: var(--accent-green); font-weight: bold; }

        .playground { background: var(--bg-medium); border: 2px solid var(--accent-yellow); border-radius: 8px; padding: 1.5rem; margin: 2rem 0; }
        .playground-header { display: flex; justify-content: space-between; margin-bottom: 1rem; }
        .playground-title { font-weight: 700; color: var(--accent-yellow); }
        textarea { width: 100%; height: 150px; background: var(--bg-dark); color: var(--text-primary); border: 1px solid var(--bg-light); padding: 1rem; font-family: 'JetBrains Mono', monospace; border-radius: 4px; resize: vertical; }

        .nav-buttons { display: flex; justify-content: space-between; margin-top: 3rem; padding-top: 2rem; border-top: 1px solid var(--bg-light); }
        .nav-btn { background: var(--bg-medium); color: var(--text-primary); border: 2px solid var(--accent-cyan); padding: 1rem 2rem; border-radius: 8px; cursor: pointer; font-family: 'Space Mono', monospace; font-weight: 700; transition: all 0.3s ease; }
        .nav-btn:hover { background: var(--accent-cyan); color: var(--bg-dark); }
        .nav-btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .complete-btn { background: linear-gradient(135deg, var(--accent-green), var(--accent-cyan)); color: var(--bg-dark); border: none; width: 100%; margin-top: 2rem; }

        .achievement { position: fixed; bottom: 20px; right: 20px; background: linear-gradient(135deg, var(--bg-medium), #000); border: 2px solid var(--accent-yellow); border-radius: 12px; padding: 1.5rem; width: 300px; transform: translateY(150%); transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); z-index: 2000; box-shadow: 0 0 30px rgba(255, 255, 0, 0.3); text-align: center; }
        .achievement.show { transform: translateY(0); }
        .achievement-icon { font-size: 3rem; margin-bottom: 0.5rem; animation: bounce 1s infinite alternate; }
        @keyframes bounce { from { transform: translateY(0); } to { transform: translateY(-10px); } }

        @media (max-width: 968px) {
            .container { flex-direction: column; }
            .sidebar { width: 100%; height: auto; position: relative; }
            .xp-bar { position: relative; top: 0; right: 0; margin: 1rem; }
        }
    </style>
</head>
<body class="sd-watermark">
    <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
    </div>

    <div class="xp-bar">
        <div class="xp-label">üìä Progress</div>
        <div class="xp-progress">
            <div class="xp-fill" id="xpFill"></div>
            <div class="xp-text" id="xpText">0 / 5 Topics</div>
        </div>
    </div>

    <header>
        <h1>üöÄ Deployment & DevOps</h1>
        <p class="subtitle">Taking Your Python Code to Production</p>
        <span class="week-badge">WEEK 11</span>
    </header>

    <div class="container">
        <aside class="sidebar">
            <nav class="nav-section">
                <div class="nav-title">üìñ Topics</div>
                <div class="nav-item active" data-section="intro">Introduction</div>
                <div class="nav-item" data-section="env">Configuration</div>
                <div class="nav-item" data-section="dependencies">Dependencies</div>
                <div class="nav-item" data-section="docker">Docker Containers</div>
                <div class="nav-item" data-section="gunicorn">Production Servers</div>
                <div class="nav-item" data-section="cheatsheet">Cheat Sheet</div>
            </nav>
        </aside>

        <main class="main-content">
            <!-- INTRO -->
            <section id="intro" class="section active">
                <h2>üåç It Works on My Machine... Now What?</h2>
                
                <div class="objectives-box">
                    <div class="objectives-title">üéØ Learning Objectives</div>
                    <ul class="objectives-list">
                        <li>Separate configuration from code (Environment Variables)</li>
                        <li>Manage dependencies with `requirements.txt`</li>
                        <li>Containerize applications with Docker</li>
                        <li>Use production WSGI servers (Gunicorn) instead of Flask dev server</li>
                        <li>Understand CI/CD concepts</li>
                    </ul>
                </div>

                <div class="vocab-list">
                    <div class="vocab-title">üìö Key Vocabulary</div>
                    <div class="vocab-grid">
                        <div class="vocab-item">
                            <span class="vocab-term">Environment Variables</span>
                            <span class="vocab-definition">Configuration values stored outside code (e.g., API keys, database URLs). Access with <code>os.getenv('VAR_NAME')</code>. Never commit secrets to Git.</span>
                        </div>
                        <div class="vocab-item">
                            <span class="vocab-term">requirements.txt</span>
                            <span class="vocab-definition">File listing all Python dependencies with versions (e.g., <code>Flask==2.3.0</code>). Generated with <code>pip freeze > requirements.txt</code>.</span>
                        </div>
                        <div class="vocab-item">
                            <span class="vocab-term">Docker</span>
                            <span class="vocab-definition">Containerization platform that packages your app with all dependencies into a portable image. Ensures "it works on my machine" works everywhere.</span>
                        </div>
                        <div class="vocab-item">
                            <span class="vocab-term">WSGI Server</span>
                            <span class="vocab-definition">Web Server Gateway Interface server (like Gunicorn) designed for production. Flask's dev server is not secure/fast enough for real users.</span>
                        </div>
                        <div class="vocab-item">
                            <span class="vocab-term">CI/CD</span>
                            <span class="vocab-definition">Continuous Integration/Continuous Deployment‚Äîautomated testing and deployment pipelines. Code commits trigger automated tests, then deploy to production if tests pass.</span>
                        </div>
                        <div class="vocab-item">
                            <span class="vocab-term">Container</span>
                            <span class="vocab-definition">Lightweight, isolated environment containing your app + dependencies. Runs consistently across dev, test, and production servers.</span>
                        </div>
                    </div>
                </div>

                <div class="analogy-box">
                    <div class="analogy-title">üéØ Analogy: Deployment as Shipping Products</div>
                    <p><strong>Development Environment:</strong> Your workshop where you build prototypes. Messy, experimental, works only for you.</p>
                    <p><strong>Production Environment:</strong> The retail store where customers buy your product. Clean, reliable, must work for everyone.</p>
                    <p><strong>Environment Variables:</strong> Shipping labels and instructions. Each package (server) needs its own address (database URL), but the product inside is the same.</p>
                    <p><strong>requirements.txt:</strong> Ingredient list on food packaging. Anyone can recreate your recipe (app) by following the exact ingredient versions.</p>
                    <p><strong>Docker Container:</strong> Shipping everything in a standardized box. Your product + packaging + instructions all in one unit that arrives intact anywhere.</p>
                    <p><strong>Gunicorn (WSGI Server):</strong> Industrial-strength truck for delivery. The van you used in your workshop (Flask dev server) can't handle highway traffic.</p>
                </div>

                <div class="explanation-box info">
                    <div class="explanation-title">üí° "Production Ready"</div>
                    <p>Code that runs on your laptop is not ready for the world. Production code needs to be secure, scalable, and reproducible.</p>
                </div>

                <div class="explanation-box">
                    <div class="explanation-title">üí° Learning Strategy: Deployment</div>
                    <p><strong>Never Hardcode Secrets:</strong> API keys, passwords, and database URLs go in environment variables, never in code. Use <code>.env</code> files locally and secrets managers in production.</p>
                    <p><strong>Pin Your Dependencies:</strong> Use exact versions in <code>requirements.txt</code> (<code>Flask==2.3.0</code>, not <code>Flask</code>). Unpinned versions break apps when libraries update.</p>
                    <p><strong>Learn Docker Basics:</strong> Dockerfile, image, container, volume. These concepts transfer to Kubernetes and cloud platforms.</p>
                    <p><strong>Test Deployment Locally:</strong> Run your Docker container locally before pushing to production. Catch config errors early.</p>
                    <p><strong>Monitor Everything:</strong> Production apps need logging and monitoring. If it breaks at 3 AM, you need to know why.</p>
                </div>

                <button class="nav-btn complete-btn" data-topic="intro">Mark Complete ‚úì</button>
                <div class="nav-buttons">
                    <button class="nav-btn" disabled>‚óÄ Previous</button>
                    <button class="nav-btn next" onclick="navigateToSection('env')">Next: Config ‚ñ∂</button>
                </div>
            </section>

            <!-- ENV VARS -->
            <section id="env" class="section">
                <h2>üîê Configuration & Secrets</h2>
                <p>Never commit passwords or API keys to Git!</p>

                <div class="skill-progression">
                    <div class="skill-tabs">
                        <button class="skill-tab active" data-level="bad" data-target="env-bad">
                            <span class="skill-tab-icon">üî¥</span> Bad
                        </button>
                        <button class="skill-tab" data-level="best" data-target="env-best">
                            <span class="skill-tab-icon">üü¢</span> Best Practice
                        </button>
                    </div>

                    <!-- BAD -->
                    <div class="skill-content active" id="env-bad">
                        <div class="code-container level-bad">
                            <div class="code-header">
                                <div class="code-header-left">
                                    <span class="code-label">Python</span>
                                    <span class="level-badge bad">‚ùå Bad Practice</span>
                                    <span class="semantic-label">Hardcoded Secrets</span>
                                </div>
                                <button class="run-button" data-output="Connecting with password: my_secret_password_123">Run ‚ñ∂</button>
                            </div>
<pre><code><span class="comment"># ‚ùå BAD: Hardcoding secrets</span>
DB_PASSWORD = <span class="string">"my_secret_password_123"</span>

<span class="keyword">def</span> <span class="function">connect_db</span>():
    <span class="comment"># If you push this to GitHub, hackers will find it!</span>
    <span class="keyword">print</span>(f<span class="string">"Connecting with password: {DB_PASSWORD}"</span>)
</code></pre>
                        </div>
                    </div>

                    <!-- BEST -->
                    <div class="skill-content" id="env-best">
                        <div class="code-container level-best">
                            <div class="code-header">
                                <div class="code-header-left">
                                    <span class="code-label">Python</span>
                                    <span class="level-badge best">‚≠ê Best Practice</span>
                                    <span class="semantic-label">Environment Variables</span>
                                </div>
                                <button class="run-button" data-output="Connecting with password: [READ FROM ENV]">Run ‚ñ∂</button>
                            </div>
<pre><code><span class="comment"># ‚≠ê BEST PRACTICE: Use os.environ</span>
<span class="keyword">import</span> os
<span class="keyword">from</span> dotenv <span class="keyword">import</span> load_dotenv

<span class="comment"># Load variables from .env file (local dev only)</span>
load_dotenv()

<span class="keyword">def</span> <span class="function">connect_db</span>():
    <span class="comment"># Get from environment, or fail if missing</span>
    password = os.getenv(<span class="string">'DB_PASSWORD'</span>)
    
    <span class="keyword">if</span> <span class="keyword">not</span> password:
        <span class="keyword">raise</span> ValueError(<span class="string">"DB_PASSWORD not set!"</span>)
        
    <span class="keyword">print</span>(f<span class="string">"Connecting with password: {password}"</span>)
</code></pre>
                        </div>
                        <div class="explanation-box tip">
                            <div class="explanation-title">‚≠ê The .env file</div>
                            <p>Create a file named <code>.env</code> containing <code>DB_PASSWORD=secret</code>. Add <code>.env</code> to your <code>.gitignore</code> file immediately.</p>
                        </div>
                    </div>
                </div>

                <button class="nav-btn complete-btn" data-topic="env">Mark Topic Complete ‚úì</button>
                <div class="nav-buttons">
                    <button class="nav-btn prev" onclick="navigateToSection('intro')">‚óÄ Prev: Intro</button>
                    <button class="nav-btn next" onclick="navigateToSection('dependencies')">Next: Dependencies ‚ñ∂</button>
                </div>
            </section>

            <!-- DEPENDENCIES -->
            <section id="dependencies" class="section">
                <h2>üì¶ Dependencies</h2>
                <p>Ensure your server installs the exact same libraries you used in development.</p>

                <div class="code-container level-best">
                    <div class="code-header">
                        <span class="code-label">Terminal</span>
                        <span class="level-badge best">‚≠ê Requirements.txt</span>
                    </div>
<pre><code><span class="comment"># 1. Freeze current environment to file</span>
$ pip freeze > requirements.txt

<span class="comment"># Content of requirements.txt:</span>
<span class="comment"># flask==2.0.1</span>
<span class="comment"># requests==2.26.0</span>
<span class="comment"># gunicorn==20.1.0</span>

<span class="comment"># 2. Install on server</span>
$ pip install -r requirements.txt
</code></pre>
                </div>

                <button class="nav-btn complete-btn" data-topic="dependencies">Mark Topic Complete ‚úì</button>
                <div class="nav-buttons">
                    <button class="nav-btn prev" onclick="navigateToSection('env')">‚óÄ Prev: Config</button>
                    <button class="nav-btn next" onclick="navigateToSection('docker')">Next: Docker ‚ñ∂</button>
                </div>
            </section>

            <!-- DOCKER -->
            <section id="docker" class="section">
                <h2>üê≥ Docker Containers</h2>
                <p>Package your app, dependencies, and OS config into a single portable unit.</p>

                <div class="code-container level-best">
                    <div class="code-header">
                        <span class="code-label">Dockerfile</span>
                        <span class="level-badge best">‚≠ê Standard Image</span>
                    </div>
<pre><code><span class="comment"># Use an official Python runtime as a parent image</span>
FROM python:3.9-slim

<span class="comment"># Set working directory</span>
WORKDIR /app

<span class="comment"># Install dependencies first (caching layer)</span>
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

<span class="comment"># Copy the rest of the code</span>
COPY . .

<span class="comment"># Command to run the app</span>
CMD ["gunicorn", "-w", "4", "-b", "0.0.0.0:8000", "app:app"]
</code></pre>
                </div>

                <button class="nav-btn complete-btn" data-topic="docker">Mark Topic Complete ‚úì</button>
                <div class="nav-buttons">
                    <button class="nav-btn prev" onclick="navigateToSection('dependencies')">‚óÄ Prev: Dependencies</button>
                    <button class="nav-btn next" onclick="navigateToSection('gunicorn')">Next: Gunicorn ‚ñ∂</button>
                </div>
            </section>

            <!-- GUNICORN -->
            <section id="gunicorn" class="section">
                <h2>ü¶Ñ Production Servers</h2>
                <p>Flask's built-in server (`app.run()`) is for development only. It is slow and insecure.</p>

                <div class="explanation-box warning">
                    <div class="explanation-title">‚ö†Ô∏è DO NOT use `python app.py` in production</div>
                    <p>The development server is single-threaded and can crash easily under load. Use a WSGI server like Gunicorn.</p>
                </div>

                <div class="code-container level-best">
                    <div class="code-header">
                        <span class="code-label">Terminal</span>
                        <span class="level-badge best">‚≠ê Gunicorn Command</span>
                    </div>
<pre><code><span class="comment"># Run Gunicorn with 4 worker processes</span>
<span class="comment"># app:app means "look in app.py for the object named app"</span>

$ gunicorn -w 4 -b 0.0.0.0:8000 app:app

<span class="comment"># -w 4: Use 4 parallel workers (good for 2-core CPU)</span>
<span class="comment"># -b ...: Bind to port 8000 on all interfaces</span>
</code></pre>
                </div>

                <button class="nav-btn complete-btn" data-topic="gunicorn">Mark Topic Complete ‚úì</button>
                <div class="nav-buttons">
                    <button class="nav-btn prev" onclick="navigateToSection('docker')">‚óÄ Prev: Docker</button>
                    <button class="nav-btn next" onclick="navigateToSection('cheatsheet')">Next: Cheat Sheet ‚ñ∂</button>
                </div>
            </section>

            <!-- CHEAT SHEET -->
            <section id="cheatsheet" class="section">
                <h2>üìú DevOps Cheat Sheet</h2>
                
                <div class="code-container level-best">
                    <div class="code-header">
                        <span class="code-label">Commands</span>
                        <span class="level-badge best">Reference</span>
                    </div>
<pre><code><span class="comment"># ‚ïê‚ïê‚ïê PIP ‚ïê‚ïê‚ïê</span>
pip freeze > requirements.txt
pip install -r requirements.txt

<span class="comment"># ‚ïê‚ïê‚ïê DOCKER ‚ïê‚ïê‚ïê</span>
docker build -t my-app .
docker run -p 8000:8000 my-app

<span class="comment"># ‚ïê‚ïê‚ïê ENVIRONMENT ‚ïê‚ïê‚ïê</span>
export DB_URL="postgresql://..."  <span class="comment"># Linux/Mac</span>
set DB_URL="postgresql://..."     <span class="comment"># Windows CMD</span>
$env:DB_URL="postgresql://..."    <span class="comment"># PowerShell</span>

<span class="comment"># ‚ïê‚ïê‚ïê PYTHON ‚ïê‚ïê‚ïê</span>
import os
secret = os.getenv('SECRET_KEY')
</code></pre>
                </div>

                <div class="objectives-box" style="margin-top: 2rem;">
                    <div class="objectives-title">üéØ Key Takeaways: Deployment</div>
                    <ul>
                        <li><strong>Never Hardcode Secrets:</strong> API keys, passwords, and database URLs must live in environment variables, never committed to Git. Use <code>os.getenv()</code> to access them.</li>
                        <li><strong>Pin All Dependencies:</strong> <code>requirements.txt</code> needs exact versions (<code>Flask==2.3.0</code>). Unpinned versions break production when libraries update unexpectedly.</li>
                        <li><strong>Docker Ensures Consistency:</strong> "It works on my machine" becomes "It works everywhere" when your app + dependencies are containerized together.</li>
                        <li><strong>Use Production Servers:</strong> Flask's dev server is not secure or performant. Use Gunicorn (or uWSGI) for production deployments.</li>
                        <li><strong>Test Locally First:</strong> Run your Docker container locally (<code>docker run</code>) to catch config errors before deploying to production servers.</li>
                        <li><strong>Separate Config from Code:</strong> Development, staging, and production environments need different configs. Environment variables make this possible without code changes.</li>
                        <li><strong>Automate Deployment:</strong> CI/CD pipelines (GitHub Actions, GitLab CI) automate testing and deployment, reducing human error and deployment friction.</li>
                        <li><strong>Monitor and Log:</strong> Production apps need logging (to files or services like Sentry). If it breaks at 3 AM, you need logs to debug remotely.</li>
                    </ul>
                </div>

                <button class="nav-btn complete-btn" data-topic="cheatsheet">Mark Lesson Complete üéâ</button>
                <div class="nav-buttons">
                    <button class="nav-btn prev" onclick="navigateToSection('gunicorn')">‚óÄ Prev: Gunicorn</button>
                    <button class="nav-btn next" disabled>üèÜ Course Complete!</button>
                </div>
            </section>
        </main>
    </div>

    <div class="achievement" id="achievement">
        <div class="achievement-icon">üöÄ</div>
        <div class="achievement-title">Achievement Unlocked!</div>
        <p>Mission Accomplished! You are now a Full-Stack Python Engineer.</p>
    </div>

    <script>
        const sectionsOrder = ['intro', 'env', 'dependencies', 'docker', 'gunicorn', 'cheatsheet'];
        const totalTopics = 5; 
        
        const progressBar = document.getElementById('progressBar');
        const xpFill = document.getElementById('xpFill');
        const xpText = document.getElementById('xpText');
        const achievement = document.getElementById('achievement');
        const completed = new Set();

        function navigateToSection(id) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            const target = document.getElementById(id);
            if (target) target.classList.add('active');
            
            document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
            const nav = document.querySelector(`.nav-item[data-section="${id}"]`);
            if (nav) nav.classList.add('active');
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', () => navigateToSection(item.dataset.section));
        });

        function updateXP() {
            const percent = (completed.size / totalTopics) * 100;
            xpFill.style.width = percent + '%';
            xpText.textContent = `${completed.size} / ${totalTopics} Topics`;
            
            if (completed.size === totalTopics) {
                achievement.classList.add('show');
                setTimeout(() => achievement.classList.remove('show'), 6000);
            }
        }

        document.querySelectorAll('.complete-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const topic = btn.dataset.topic;
                if (!completed.has(topic)) {
                    completed.add(topic);
                    const item = document.querySelector(`.nav-item[data-section="${topic}"]`);
                    if (item) item.classList.add('completed');
                    btn.textContent = 'Completed ‚úì';
                    btn.disabled = true;
                    updateXP();
                }
            });
        });

        document.querySelectorAll('.run-button').forEach(btn => {
            btn.addEventListener('click', () => {
                const container = btn.closest('.code-container');
                let out = container.querySelector('.output');
                if (!out) {
                    out = document.createElement('div');
                    out.className = 'output';
                    container.appendChild(out);
                }
                out.innerHTML = '<div class="output-label">Output:</div>' + 
                               (btn.dataset.output || 'No output').replace(/\n/g, '<br>');
                out.classList.add('show');
                btn.disabled = true;
                btn.innerHTML = '‚úî Ran';
            });
        });

        document.querySelectorAll('.skill-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                const progression = tab.closest('.skill-progression');
                const targetId = tab.dataset.target;
                progression.querySelectorAll('.skill-tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                progression.querySelectorAll('.skill-content').forEach(content => {
                    content.classList.remove('active');
                });
                const targetContent = document.getElementById(targetId);
                if (targetContent) targetContent.classList.add('active');
            });
        });

        window.addEventListener('scroll', () => {
            const doc = document.documentElement;
            const scrolled = doc.scrollTop || document.body.scrollTop;
            const height = (doc.scrollHeight - doc.clientHeight) || 1;
            const percent = (scrolled / height) * 100;
            progressBar.style.width = percent + '%';
        });

        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight' || e.key === 'ArrowLeft') {
                const activeSection = document.querySelector('.section.active');
                if (!activeSection) return;
                const currentIndex = sectionsOrder.indexOf(activeSection.id);
                let newIndex;
                if (e.key === 'ArrowRight' && currentIndex < sectionsOrder.length - 1) newIndex = currentIndex + 1;
                else if (e.key === 'ArrowLeft' && currentIndex > 0) newIndex = currentIndex - 1;
                if (newIndex !== undefined) navigateToSection(sectionsOrder[newIndex]);
            }
        });

        console.log('üöÄ Week 11: Deployment Loaded!');
    </script>

    <footer class="sd-footer">
            
            <div class="sd-credits">
            Enhanced curriculum for the Returned Citizen community by <a href="https://www.straydog-syndications-llc.com/" target="_blank" rel="noopener">StrayDog Syndications LLC</a>
        </div>
        <div class="sd-links">
            <a href="https://github.com/StrayDogSyn/Python-Essentials-Code-The-Dream" target="_blank" rel="noopener" aria-label="View on GitHub">
                <svg class="sd-github" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg>
            </a>
        </div>
    </footer>

</body>
</html>
